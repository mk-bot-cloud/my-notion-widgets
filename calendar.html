<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Clean Academic Calendar</title>
    <style>
        :root { --bg: #ffffff; --text: #191919; --accent: #2383e2; --sat: #2383e2; --sun-hol: #eb5757; }
        @media (prefers-color-scheme: dark) { :root { --bg: #191919; --text: #efefef; } }
        body { background: var(--bg); color: var(--text); font-family: "Inter", "Hiragino Kaku Gothic ProN", sans-serif; margin: 0; padding: 20px; text-align: center; overflow: hidden; }
        
        /* ヘッダー周りの調整 */
        .header { display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 20px; }
        .month { font-size: 14px; text-transform: uppercase; letter-spacing: 0.3em; color: var(--text); font-weight: 800; min-width: 150px; }
        .nav-btn { background: none; border: 1px solid #888; color: var(--text); border-radius: 4px; cursor: pointer; padding: 2px 8px; font-size: 12px; transition: 0.2s; }
        .nav-btn:hover { background: var(--text); color: var(--bg); }

        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; max-width: 320px; margin: 0 auto; }
        .day { font-size: 13px; padding: 10px 0; border-radius: 8px; position: relative; cursor: default; transition: background 0.2s; }
        .day.today { background: var(--text); color: var(--bg); font-weight: bold; border-radius: 50%; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; margin: 0 auto; }
        .day.sat { color: var(--sat); }
        .day.sun, .day.holiday { color: var(--sun-hol); }
        .weekday { font-size: 10px; color: #888; font-weight: bold; margin-bottom: 5px; }
        
        .day[title]:hover::before {
            content: attr(title); position: absolute; top: -30px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.8); color: #fff; padding: 4px 10px; border-radius: 4px; font-size: 10px; white-space: nowrap; z-index: 10; font-weight: normal;
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="nav-btn" onclick="changeMonth(-1)">◀</button>
        <div id="month-label" class="month">Loading...</div>
        <button class="nav-btn" onclick="changeMonth(1)">▶</button>
    </div>
    <div class="grid" id="calendar-grid"></div>

    <script>
        const holidays = {
            "2026-01-01": "元日", "2026-01-12": "成人の日", "2026-02-11": "建国記念の日",
            "2026-02-23": "天皇誕生日", "2026-03-20": "春分の日", "2026-04-29": "昭和の日",
            "2026-05-03": "憲法記念日", "2026-05-04": "みどりの日", "2026-05-05": "こどもの日",
            "2026-05-06": "振替休日", "2026-07-20": "海の日", "2026-08-11": "山の日",
            "2026-09-21": "敬老の日", "2026-09-22": "国民の休日", "2026-09-23": "秋分の日",
            "2026-10-12": "スポーツの日", "2026-11-03": "文化の日", "2026-11-23": "勤労感謝の日"
        };

        let currentViewDate = new Date(); // 現在表示している月の基準日

        function renderCalendar() {
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = ''; // 一旦クリア

            const year = currentViewDate.getFullYear();
            const month = currentViewDate.getMonth();
            const todayDate = new Date();
            
            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            document.getElementById('month-label').innerText = monthNames[month] + " " + year;

            // 曜日ヘッダー
            ['S','M','T','W','T','F','S'].forEach((d, i) => {
                const el = document.createElement('div');
                el.className = 'weekday';
                if(i === 0) el.style.color = 'var(--sun-hol)';
                if(i === 6) el.style.color = 'var(--sat)';
                el.innerText = d; grid.appendChild(el);
            });

            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();

            // 空白埋め
            for(let i=0; i<firstDay; i++) grid.appendChild(document.createElement('div'));

            // 日付生成
            for(let i=1; i<=lastDate; i++) {
                const el = document.createElement('div');
                el.className = 'day';
                const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(i).padStart(2,'0')}`;
                const dayOfWeek = new Date(year, month, i).getDay();

                if(dayOfWeek === 0) el.classList.add('sun');
                if(dayOfWeek === 6) el.classList.add('sat');
                if(holidays[dateStr]) {
                    el.classList.add('holiday');
                    el.title = holidays[dateStr];
                }

                // 「本当の今日」かつ「表示月が今月」なら強調
                if(i === todayDate.getDate() && month === todayDate.getMonth() && year === todayDate.getFullYear()) {
                    el.classList.add('today');
                }

                el.innerText = i;
                grid.appendChild(el);
            }
        }

        // 月を変更する関数
        function changeMonth(diff) {
            currentViewDate.setMonth(currentViewDate.getMonth() + diff);
            renderCalendar();
        }

        // 初回実行
        renderCalendar();
    </script>
</body>
</html>
