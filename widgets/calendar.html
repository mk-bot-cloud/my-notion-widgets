<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Clean Academic Calendar</title>
    <style>
        :root { --bg: #ffffff; --text: #191919; --accent: #2383e2; --sat: #2383e2; --sun-hol: #eb5757; --btn-bg: #f5f5f5; }
        @media (prefers-color-scheme: dark) { :root { --bg: #191919; --text: #efefef; --btn-bg: #2a2a2a; } }
        body { background: var(--bg); color: var(--text); font-family: "Inter", "Hiragino Kaku Gothic ProN", sans-serif; margin: 0; padding: 15px; text-align: center; overflow: hidden; }
        
        /* ヘッダー周り */
        .header { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 15px; position: relative; }
        
        .month { 
            font-size: 15px; 
            text-transform: capitalize; 
            letter-spacing: 0.02em; 
            color: var(--text); 
            font-weight: 700; 
            min-width: 120px; 
        }

        /* ナビゲーションボタン */
        .nav-btn { background: none; border: none; color: #888; cursor: pointer; padding: 4px 6px; font-size: 16px; transition: 0.2s; line-height: 1; border-radius: 4px; }
        .nav-btn:hover { color: var(--text); background: var(--btn-bg); }

        /* 今日ボタン */
        .today-btn {
            font-size: 10px;
            font-weight: 600;
            padding: 3px 7px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: var(--bg);
            color: var(--text);
            cursor: pointer;
            transition: 0.2s;
        }
        .today-btn:hover { background: var(--btn-bg); }

        /* カレンダーグリッド */
        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; max-width: 260px; margin: 0 auto; }
        .weekday { font-size: 9px; color: #888; font-weight: bold; margin-bottom: 5px; }
        
        /* 各日付のスタイル */
        .day-container { height: 28px; display: flex; align-items: center; justify-content: center; position: relative; }
        .day { font-size: 12px; cursor: default; transition: background 0.2s; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }
        
        /* 今日の正円デザイン */
        .day.today { 
            background: var(--text); 
            color: var(--bg); 
            font-weight: bold; 
            width: 24px; 
            height: 24px; 
            border-radius: 50%; 
        }

        .day.sat { color: var(--sat); }
        .day.sun, .day.holiday { color: var(--sun-hol); }
        
        /* ツールチップ */
        .day[title]:hover::before {
            content: attr(title); position: absolute; top: -28px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.8); color: #fff; padding: 3px 8px; border-radius: 4px; font-size: 9px; white-space: nowrap; z-index: 10;
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="nav-btn" onclick="changeMonth(-1)">‹</button>
        <div id="month-label" class="month">Loading...</div>
        <button class="nav-btn" onclick="changeMonth(1)">›</button>
        <button class="today-btn" onclick="goToday()">Today</button>
    </div>
    <div class="grid" id="calendar-grid"></div>

    <script>
        // 2026年の祝日リスト（現在の年次設定に合わせて維持）
        const holidays = {
            "2026-01-01": "元日", "2026-01-12": "成人の日", "2026-02-11": "建国記念の日",
            "2026-02-23": "天皇誕生日", "2026-03-20": "春分の日", "2026-04-29": "昭和の日",
            "2026-05-03": "憲法記念日", "2026-05-04": "みどりの日", "2026-05-05": "こどもの日",
            "2026-05-06": "振替休日", "2026-07-20": "海の日", "2026-08-11": "山の日",
            "2026-09-21": "敬老の日", "2026-09-22": "国民の休日", "2026-09-23": "秋分の日",
            "2026-10-12": "スポーツの日", "2026-11-03": "文化の日", "2026-11-23": "勤労感謝の日"
        };

        let currentViewDate = new Date(); 

        function renderCalendar() {
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = ''; 

            const year = currentViewDate.getFullYear();
            const month = currentViewDate.getMonth();
            const now = new Date();
            
            const monthNames = ["january", "february", "march", "april", "may", "june", "july", "august", "september", "october", "november", "december"];
            document.getElementById('month-label').innerText = monthNames[month] + " " + year;

            ['S','M','T','W','T','F','S'].forEach((d, i) => {
                const el = document.createElement('div');
                el.className = 'weekday';
                if(i === 0) el.style.color = 'var(--sun-hol)';
                if(i === 6) el.style.color = 'var(--sat)';
                el.innerText = d; grid.appendChild(el);
            });

            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();

            for(let i=0; i<firstDay; i++) grid.appendChild(document.createElement('div'));

            for(let i=1; i<=lastDate; i++) {
                const container = document.createElement('div');
                container.className = 'day-container';
                
                const el = document.createElement('div');
                el.className = 'day';
                const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(i).padStart(2,'0')}`;
                const dayOfWeek = new Date(year, month, i).getDay();

                if(dayOfWeek === 0) el.classList.add('sun');
                if(dayOfWeek === 6) el.classList.add('sat');
                if(holidays[dateStr]) {
                    el.classList.add('holiday');
                    el.title = holidays[dateStr];
                }

                if(i === now.getDate() && month === now.getMonth() && year === now.getFullYear()) {
                    el.classList.add('today');
                }

                el.innerText = i;
                container.appendChild(el);
                grid.appendChild(container);
            }
        }

        function changeMonth(diff) {
            currentViewDate.setMonth(currentViewDate.getMonth() + diff);
            renderCalendar();
        }

        function goToday() {
            currentViewDate = new Date();
            renderCalendar();
        }

        function scheduleMidnightUpdate() {
            const now = new Date();
            const midnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0);
            const msUntilMidnight = midnight.getTime() - now.getTime();
            
            setTimeout(() => {
                currentViewDate = new Date(); 
                renderCalendar();
                scheduleMidnightUpdate(); 
            }, msUntilMidnight);
        }

        renderCalendar();
        scheduleMidnightUpdate();
    </script>
</body>
</html>
